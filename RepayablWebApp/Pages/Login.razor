@page "/login"
@using RepayablWebApp.Data.Repositories
@inject IUserClient _userClient
<!-- Page Loader -->


<div class="auth-main2 particles_js">
    <div class="auth_div vivify fadeInTop">
        <div class="card">
            <div class="body">
                <div class="login-img">
                    <img class="img-fluid" src="assets/images/login-img.png" />
                </div>
                <div class="form-auth-small">
                    <div class="mb-3">
                        <p class="lead">Login to your account</p>
                    </div>
                    <div class="form-group">
                        <label for="signin-email" class="control-label sr-only">Email</label>
                        <input class="form-control round" id="signin-email" @bind="SelectedUser.UserName" placeholder="Email" />
                    </div>
                    <div class="form-group">
                        <label for="signin-password" class="control-label sr-only">Password</label>
                        <input class="form-control round" id="signin-password" @bind="SelectedUser.Password" placeholder="Password" />
                    </div>
                    <div class="form-group clearfix">
                        <label class="fancy-checkbox element-left">
                            <input type="checkbox">
                            <span>Remember me</span>
                        </label>
                    </div>
                    <button type="submit" @onclick="loginUserAsync" class="btn btn-primary btn-round btn-block">LOGIN</button>
                    <div class="mt-4">
                        <span class="helper-text m-b-10"><i class="fa fa-lock"></i> <a href="page-forgot-password.html">Forgot password?</a></span>
                        <span>Don't have an account? <a href="Register">Register</a></span>
                        <span>@SuccessMsg</span>
                    </div>
                </div>
                <div class="pattern">
                    <span class="red"></span>
                    <span class="indigo"></span>
                    <span class="blue"></span>
                    <span class="green"></span>
                    <span class="orange"></span>
                </div>
            </div>
        </div>
    </div>
    <div id="particles-js"></div>
</div>

<!-- END WRAPPER -->

@code {
    public User SelectedUser { get; set; } = new User();
    int currentCount = 0;
    string SuccessMsg = string.Empty;
    public async Task loginUserAsync()
    {
        var authUser= await _userClient.LoginAsync(SelectedUser);
        if(authUser!=null)
        {
            SuccessMsg = "Login Successful";
        }
    }
}
